{% extends "bootstrap/base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}
{##}
{#<html lang="en">#}
{#为了便于访问登陆表单，在 基础模板中改进，即在导航栏中包含指向它的链接#}
{##}
{#<head>#}
{#    <meta charset="UTF-8">#}
{#    {% if title %}#}
{#        <title>{{ title }} -Microblog</title>#}
{#    {% else %}#}
{#        <title>Welcome to weibo!</title>#}
{#    {% endif %}#}
{#</head>#}
{#<body>#}
{#        <div>#}
{#            Microblog:#}
{#                <a href="{{ url_for('index') }}">Home</a>#}
{#                <a href="{{ url_for('explore') }}">Explore</a>#}
{#                 {% if current_user.is_anonymous %}#}
{#                <a href="{{ url_for('login') }}">Login</a>#}
{#                {% else %}#}
{#                 <a href="{{ url_for('user',username=current_user.username) }}">Profile</a>#}
{#                 <a href = "{{ url_for('logout') }}">Logout</a>#}
{#                {% endif %}#}
{#        <div/>#}
{#            #设置flash格式#}
{#                <hr>#}
{#                    {% with messages = get_flashed_messages() %}#}
{#                    {% if messages %}#}
{#                    <ul>#}
{#                        {% for message in messages %}#}
{#                        <li>{{ message }}</li>#}
{#                        {% endfor %}#}
{#                    </ul>#}
{#                    {% endif %}#}
{#                    {% endwith %}#}
{#            {% block content %}#}
{#            {% endblock %}#}
{#</body>#}
{#</html>#}

{% block title %}
    {% if title %}
        {{ title }} -Microblog
    {% else %}
        Welcome to Microblog!
    {% endif %}
{% endblock %}


{% block navbar %}
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsed-nav">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{{ url_for('index') }}">Microblog</a>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="{{ url_for('index') }}">Home</a></li>
                    <li><a href="{{ url_for('explore') }}">Explore</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    {% if current_user.is_anonymous %}
                        <li><a href="{{ url_for('login') }}">Login</a></li>
                    {% else %}
                       <li><a href="{{ url_for('user',username=current_user.username) }}">Profile</a></li>
                        <li><a href = "{{ url_for('logout') }}">Logout</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
{% endblock %}


{% block content %}
    <div class="container">
        {% with messages = get_flashed_messages() %}
            {% if message %}
                {% for message in messages %}
                    <div class="alert alert-info" role="alert">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block app_content %}{% endblock %}
    </div>
{% endblock %}